import{_ as N}from"./Master.83d66d13.js";import{u as v,o,c as g,w as m,a as d,b as r,L,e as l,t as _,d as t,g as H,F as w,H as T,f as P,r as D}from"./app.cbadd5a6.js";import{_ as E}from"./Container.3c236ea6.js";import{_ as F}from"./index.5ef1a72a.js";import{_ as y}from"./Header1.4d5ae8c0.js";import{N as z}from"./Notification.1138f49b.js";import{_ as S}from"./Input.d60ea0ad.js";import{_ as U}from"./Empty.ca02caf5.js";import"./sweetalert2.all.2b313f34.js";const q=P("Lihat"),A={key:0},G={key:1},K=["for"],O=["id"],R=["for"],I={class:"modal-box relative",for:""},J=["for"],M={key:0,class:"text-sm text-error mt-1 mb-5"},Q={id:"hpsTeams"},W={class:"flex justify-center my-5"},X=["onClick"],Y={key:0},Z={key:1},tt={key:2},et={key:3},st=["for"],ot=["id"],rt=["for"],at={class:"modal-box relative",for:""},lt=["for"],nt={class:"text-sm text-error mt-1 mb-5"},it={class:"flex justify-center my-5"},ct=["onClick"],ut=["for"],mt=["id"],dt=["for"],pt={class:"modal-box relative",for:""},bt=["for"],_t=t("div",{class:"text-center text-first font-bold text-2xl"},"Tunjuk Pejabat Pengadaan (PP) untuk menyetujui HPS",-1),ht={key:0,class:"text-sm text-error mt-1 mb-5"},ft={id:"ppList"},kt={class:"flex justify-center my-5"},xt=["onClick"],Vt={__name:"Index",props:{procurements:{type:Object,required:!0},hpsteams:{type:Object,required:!0},ppList:{type:Object,required:!0}},setup(x){const h=z(),i=v({_method:"patch",hps:"",status:5}),f=v({pp:"",_method:"patch",status:8}),k=v({_method:"patch",comment:"",status:7}),V=(u,e)=>{i.post(route("ppk.procurement.update",u),{onSuccess:c=>{h("success","Berhasil memilih "+i.hps),i.reset()},onError:c=>h("error","Gagal memilih "+i.hps),onFinish:()=>e(),onStart:()=>{i.clearErrors(),e()}})},C=(u,e,c)=>{f.post(route("ppk.procurement.update",u),{onSuccess:n=>h("success","Berhasil menyetujui HPS "+e),onError:n=>{h("error","Gagal menyetujui HPS "+e),console.log(n)},onStart:()=>c(),onFinish:()=>c()})},B=(u,e)=>{k.post(route("ppk.procurement.update",u),{onSuccess:()=>{h("warning","Berhasil menolak HPS "+e),k.reset()},onError:c=>h("error","Gagal menolak HPS "+e)})};function j(u){for(var e="",c=u.toString().split("").reverse().join(""),n=0;n<c.length;n++)n%3==0&&(e+=c.substr(n,3)+".");return"Rp. "+e.split("",e.length-1).reverse().join("")}const $=[{text:"Judul Paket",value:"name",sortable:!0},{text:"Kode Akun",value:"account",sortable:!0},{text:"Kategori",value:"category",sortable:!0},{text:"Unit Kerja",value:"unit",sortable:!0},{text:"Status",value:"status",sortable:!0},{text:"Nilai RAB",value:"rab",sortable:!0},{text:"Nilai HPS",value:"hps",sortable:!0},{text:"PIC HPS",value:"hps_executor"},{text:"Status HPS",value:"persetujuan"},{text:"aksi",value:"aksi"}];return(u,e)=>{const c=D("EasyDataTable");return o(),g(N,null,{default:m(({loading:n})=>[x.procurements.length>0?(o(),g(E,{key:0},{default:m(()=>[d(y,{title:"Daftar Pengadaan",widthSize:"100"}),d(c,{headers:$,items:x.procurements,"table-class-name":"customize-table",sortBy:"status",sortType:"asc","rows-per-page":5,maxPaginationNumber:10,"buttons-pagination":""},{"item-status":m(({status:a})=>[d(F,{status:a},null,8,["status"])]),"item-aksi":m(({id:a})=>[d(r(L),{onClick:s=>n(),href:u.route("ppk.procurement.show",a),class:"btn btn-xs btn-outline text-first font-bold"},{default:m(()=>[q]),_:2},1032,["onClick","href"])]),"item-hps_executor":m(({executor:a,id:s})=>[a.hps!=null?(o(),l("div",A,_(a.hps.name),1)):(o(),l("div",G,[t("label",{for:s,class:"btn btn-xs border-first modal-button bg-first"},"Pilih Tim HPS",8,K),t("input",{type:"checkbox",id:s,class:"modal-toggle"},null,8,O),t("label",{for:s,class:"modal cursor-pointer"},[t("label",I,[t("label",{for:s,class:"btn btn-xs border-first bg-first btn-circle absolute right-2 top-2"},"\u2715",8,J),d(y,{title:"Tunjuk Tim HPS",class:"mt-3 mb-6",widhSize:"50"}),d(S,{id:"category",type:"search",class:"block w-full",modelValue:r(i).hps,"onUpdate:modelValue":e[0]||(e[0]=p=>r(i).hps=p),list:"hpsTeams",status:r(i).errors.hps},null,8,["modelValue","status"]),r(i).errors.hps?(o(),l("div",M,_(r(i).errors.hps),1)):H("",!0),t("datalist",Q,[(o(!0),l(w,null,T(x.hpsteams,p=>(o(),l("option",{key:p.id},_(p.name),1))),128))]),t("div",W,[t("button",{onClick:p=>V(s,n),class:"btn border-first bg-first mt-5"},"Pilih",8,X)])])],8,R)]))]),"item-persetujuan":m(({status:a,id:s,name:p})=>[a==7?(o(),l("div",Y,"Ditolak")):a>7?(o(),l("div",Z,"Disetujui")):a<6?(o(),l("div",tt,"Belum Disetujui")):(o(),l("div",et,[t("label",{for:s+"tolak",class:"btn text-first btn-xs bg-slate-200 border-none hover:text-white hover:bg-first font-bold"},"Tolak",8,st),t("input",{type:"checkbox",id:s+"tolak",class:"modal-toggle"},null,8,ot),t("label",{for:s+"tolak",class:"modal cursor-pointer"},[t("label",at,[t("label",{for:s+"tolak",class:"btn btn-xs border-first bg-first btn-circle absolute right-2 top-2"},"\u2715",8,lt),d(y,{title:"Alasan Penolakan HPS",class:"mt-3 mb-6",widhSize:"50"}),d(S,{type:"text",class:"block w-full",modelValue:r(k).comment,"onUpdate:modelValue":e[1]||(e[1]=b=>r(k).comment=b),status:r(k).errors.comment},null,8,["modelValue","status"]),t("div",nt,_(r(k).errors.comment),1),t("div",it,[t("button",{onClick:b=>B(s,p),class:"btn border-first bg-first"},"Tolak HPS",8,ct)])])],8,rt),t("label",{for:s,class:"btn btn-xs border-first modal-button bg-first ml-3"},"Setuju",8,ut),t("input",{type:"checkbox",id:s,class:"modal-toggle"},null,8,mt),t("label",{for:s,class:"modal cursor-pointer"},[t("label",pt,[t("label",{for:s,class:"btn btn-xs border-first bg-first btn-circle absolute right-2 top-2"},"\u2715",8,bt),_t,d(S,{id:"category",type:"search",class:"block w-full mt-5",modelValue:r(f).pp,"onUpdate:modelValue":e[2]||(e[2]=b=>r(f).pp=b),list:"ppList",status:r(f).errors.pp},null,8,["modelValue","status"]),r(f).errors.pp?(o(),l("div",ht,_(r(f).errors.pp),1)):H("",!0),t("datalist",ft,[(o(!0),l(w,null,T(x.ppList,b=>(o(),l("option",{key:b.id},_(b.name),1))),128))]),t("div",kt,[t("button",{onClick:b=>C(s,p,n),class:"btn border-first bg-first mt-5 tracking-wide"},"Pilih",8,xt)])])],8,dt)]))]),"item-rab":m(({budget_plan:a})=>[P(_(j(a.total)),1)]),"item-hps":m(({estimate:a})=>[P(_(j(a.total)),1)]),_:2},1032,["items"])]),_:2},1024)):(o(),g(U,{key:1,text:"pengadaan"}))]),_:1})}}};export{Vt as default};
