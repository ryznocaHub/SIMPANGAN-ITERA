import{_ as N}from"./Master.1f615f96.js";import{_ as f}from"./Container.dd8793cc.js";import{C as R,p as F,a as M,B as O,b as K,L as E,c as z,P as $,D as H,d as I,e as J}from"./dashboard.ba8fd22b.js";import{u as U,o as m,c as W,w as i,a as l,b as n,d as a,e as b,f as v,t as g,L as X,n as Z,g as w,r as y}from"./app.df3260cc.js";import{_ as h}from"./Header1.119769ea.js";import{d as k}from"./main.02f154ce.js";import{h as d}from"./moment.9709ab41.js";const q={class:"flex justify-between items-center h-screen mt-10"},G={class:"w-6/12"},Q={key:0,class:"w-6/12 ml-5"},Y={class:"flex justify-between"},ee=v("Lihat"),te={key:1,class:"w-5/12 text-right"},ae=a("div",{class:"flex justify-end"},[a("div",{class:"text-right text-4xl font-extrabold tracking-widest text-first drop-shadow-xl flex"},"Pengadaan"),a("span",{class:"flex h-5 w-5 relative justify-center items-center"},[a("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-error opacity-75 delay-200"}),a("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-none border-error border-2 border-solid delay-75"}),a("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-none border-error border-2 border-solid"}),a("span",{class:"right-0 relative inline-flex rounded-full h-3 w-3 bg-error"})])],-1),re=a("div",{class:"text-right mr-5 text-4xl font-extrabold mb-5 tracking-widest text-first drop-shadow-xl"},"Barang dan Jasa",-1),ne=a("div",{class:"text-lg tracking-wide leading-7"},"adalah kegiatan Pengadaan Barang / Jasa oleh Kementerian / Lembaga / Perangkat Daerah yang dibiayai oleh APBN/APBD yang prosesnya sejak identifikasi kebutuhan, sampai dengan serah terima hasil pekerjaan.",-1),le=[ae,re,ne],se={class:"flex justify-between items-center"},oe=a("div",{class:"w-5/12"},[a("div",{class:"flex"},[a("span",{class:"flex h-5 w-5 relative justify-center items-center"},[a("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-error opacity-75 delay-200"}),a("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-none border-error border-2 border-solid delay-75"}),a("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-none border-error border-2 border-solid"}),a("span",{class:"right-0 relative inline-flex rounded-full h-3 w-3 bg-error"})]),a("div",{class:"text-4xl font-extrabold tracking-widest text-first drop-shadow-xl flex"},"Institut")]),a("div",{class:"ml-5 text-4xl font-extrabold mb-5 tracking-widest text-first drop-shadow-xl"},"Teknologi Sumatera"),a("div",{class:"text-lg tracking-wide leading-7"},"Sebagai salah satu Perguruan Tinggi Negeri di Indonesia, ITERA turut melaksanakan kegiatan pengadaan barang dan jasa guna menunjang tercapainya Tridharma Perguruan Tinggi."),a("div",{class:"text-lg tracking-wide leading-7"},"Setidaknya terdapat \xB150 unit kerja yang melaksanakan kegiatan pengadaan barang dan jasa.")],-1),ie={class:"w-7/12 grid place-items-center ml-10"},de={class:"flex justify-between"},ue=a("div",null,"Filter Berdasarkan Jangkauan Tanggal",-1),ce=a("span",{class:"mx-5 font-bold text-lg"},"-",-1),fe={key:0,class:"text-error text-sm mb-5 mt-2"},me=a("div",{class:"mb-3"},"Filter Berdasarkan Bulan",-1),be={key:0,class:"text-error text-sm mt-2"},_e={__name:"Index",props:{procurements:{type:Object},groupedProc:{type:Object},width:{type:Number,default:200},height:{type:Number,default:300}},setup(p){const u=p;R.register(F,M,O,K,E,z,$);function _(r){var t=[];for(let o=2;o<11;o++)r[o]?t.push(r[o].length):t.push(0);return t}function x(r){var t=[];for(const o in r)t.push(r[o].id);return t}function P(r){for(var t="",o=r.toString().split("").reverse().join(""),c=0;c<o.length;c++)c%3==0&&(t+=o.substr(c,3)+".");return"Rp. "+t.split("",t.length-1).reverse().join("")}var j={labels:x(u.procurements.data),datasets:[{data:u.procurements.data,tension:.3,borderColor:"rgb(34,211,238)",pointBackgroundColor:"#ff7674",pointHoverBorderWidth:10,pointBorderColor:"rgb(255, 118, 116, 0.4)",pointBorderWidth:4,borderWidth:2,backgroundColor:"#ffd700",fill:!0}]};const e=U({preview:null,start:null,end:null,month:null,year:null,error:"",error2:"",show:0,cek:j}),C=["RAB Masuk","Revisi RAB","Penunjukan Tim HPS","Pembuatan HPS","Pengecekan HPS","Revisi HPS","Penunjukan Supplier","Proses Kontrak","Pengadaan Selesai"],D={labels:[1,2,3,4,5,6,7,8,9],datasets:[{label:"Total",backgroundColor:["rgb(207,250,254, 0.4)","rgb(255,255,152, 0.3)","rgb(186,230,253, 0.2)","rgb(165,243,252, 0.3)","rgb(103,232,249, 0.3)","rgb(255,255,152, 0.6)","rgb(34,211,238, 0.3)","rgb(56,189,248, 0.4)"],borderColor:["rgb(207,250,254, 0.9)","rgb(255,231,138, 0.6)","rgb(186,230,253, 0.4)","rgb(165,243,252, 0.4)","rgb(103,232,249, 0.4)","rgb(255,231,138, 0.6)","rgb(34,211,238, 0.4)","rgb(56,189,248, 0.4)"],borderWidth:2,borderRadius:5,data:_(u.groupedProc)}]},B={responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{beginAtZero:!0,callback:function(r){if(r%1===0)return r}},title:{text:"Total",display:!0}},x:{ticks:{},title:{text:"Fase Pengadaan",display:!0}}},plugins:{tooltip:{callbacks:{title:function(r){return C[r[0].dataIndex]},label:function(r){return"Total : "+r.formattedValue},afterFooter:function(){return"Klik untuk melihat"}}}},parsing:{xAxisKey:"id"},onClick:(r,t)=>{e.preview=u.groupedProc[t[0].index+2],e.show=1}},S={responsive:!0,maintainAspectRatio:!1,parsing:{xAxisKey:"id",yAxisKey:"total"},scales:{y:{ticks:{callback:function(r){if(r%1e7===0)return r/1e6+" Jt"}},title:{text:"Nilai RAB",display:!0}},x:{ticks:{display:!1}}},plugins:{tooltip:{callbacks:{title:function(r){return r[0].raw.name},label:function(r){return"Rp. "+r.formattedValue}}},filler:{drawTime:"beforeDraw"}},elements:{line:{fill:!0,backgroundColor:"rgb(186,230,253, 0.2)"}},datasets:{line:{fill:!0,backgroundColor:"rgb(186,230,253, 0.2)"}}},T=()=>{if(e.start==null||e.end==null){e.error="Kedua Field jangkauan tanggal harus terisi";return}if(e.start>e.end){e.error="Field Jangkauan Awal harus lebih kecil";return}e.error="",e.error2="";var r=u.procurements.data.filter(function(t){return d(e.start)<d(t.date)&&d(e.end)>d(t.date)});e.cek={labels:x(r),datasets:[{backgroundColor:"#f87979",data:r}]}},A=()=>{if(e.year==null&&e.month==null){e.error2="Salah satu field harus terisi";return}e.error="",e.error2="";var r=u.procurements.data.filter(function(t){if(e.month)return e.month&&d(t.date).isSame(e.month,"month");console.log(e.year),console.log(d(t.date).isSame(e.year,"year"))});e.cek={labels:x(r),datasets:[{backgroundColor:"#f87979",data:r}]}},V=[{text:"Tanggal",value:"date",sortable:!0},{text:"Nama Paket PL",value:"name",sortable:!0},{text:"Unit Kerja",value:"unit",sortable:!0},{text:"Nilai RAB",value:"total",sortable:!0},{text:"aksi",value:"aksi"}];return(r,t)=>{const o=y("Vue3Lottie"),c=y("EasyDataTable");return m(),W(N,null,{default:i(({loading:L})=>[l(o,{animationData:n(H),height:450,width:700},null,8,["animationData"]),a("div",q,[a("div",G,[l(h,{title:"Status Pengadaan","width-size":"100",class:""}),l(f,null,{default:i(()=>[l(n(I),{"chart-options":B,"chart-data":D,width:p.width,height:p.height},null,8,["width","height"])]),_:1})]),n(e).preview?(m(),b("div",Q,[a("div",Y,[l(h,{title:"Daftar Pengadaan","width-size":"100"}),a("button",{onClick:t[0]||(t[0]=()=>n(e).preview=null),class:"btn btn-sm text-first bg-slate-200 border-none hover:text-white hover:bg-first font-bold"},"X")]),l(f,null,{default:i(()=>[l(c,{headers:V,items:n(e).preview,"table-class-name":"customize-table",sortBy:"status",sortType:"asc","rows-per-page":5,maxPaginationNumber:10,"buttons-pagination":""},{"item-date":i(({date:s})=>[v(g(n(d)(s).format("DD-MM-yy")),1)]),"item-total":i(({total:s})=>[v(g(P(s)),1)]),"item-aksi":i(({id:s})=>[l(n(X),{onClick:ge=>L(),href:r.route("admin.procurement.show",s),class:"btn btn-xs text-first bg-slate-200 border-none hover:text-white hover:bg-first font-bold"},{default:i(()=>[ee]),_:2},1032,["onClick","href"])]),_:2},1032,["items"])]),_:2},1024)])):(m(),b("div",te,le))]),a("div",se,[oe,a("div",ie,[l(h,{title:"Sebaran Nilai RAB","width-size":"100",class:"place-self-start"}),l(f,{class:"mt-0 w-full"},{default:i(()=>[l(n(J),{"chart-options":S,"chart-data":n(e).cek,height:200},null,8,["chart-data"])]),_:1}),l(h,{title:"Filter Data","width-size":"100",class:"place-self-start mt-8"}),a("div",de,[l(f,{class:"w-6/12 flex flex-col justify-between"},{default:i(()=>[a("div",null,[ue,a("div",{class:Z(["flex justify-center mb-5 mt-5",{"mb-5":!n(e).error}])},[l(n(k),{modelValue:n(e).start,"onUpdate:modelValue":[t[1]||(t[1]=s=>n(e).start=s),t[2]||(t[2]=()=>{n(e).year=null,n(e).month=null})],enableTimePicker:!1,format:"dd-MM-yy",maxDate:new Date,monthChangeOnScroll:!1,autoApply:""},null,8,["modelValue","maxDate"]),ce,l(n(k),{modelValue:n(e).end,"onUpdate:modelValue":[t[3]||(t[3]=s=>n(e).end=s),t[4]||(t[4]=()=>{n(e).year=null,n(e).month=null})],enableTimePicker:!1,format:"dd-MM-yy",maxDate:new Date,monthChangeOnScroll:!1,autoApply:""},null,8,["modelValue","maxDate"])],2),n(e).error?(m(),b("div",fe,g(n(e).error),1)):w("",!0)]),a("button",{onClick:t[5]||(t[5]=s=>T()),class:"btn btn-sm mt-8 text-first bg-slate-200 border-none hover:text-white hover:bg-first font-bold"},"Filter")]),_:1}),l(f,{class:"w-4/12 flex-col justify-between"},{default:i(()=>[a("div",null,[me,l(n(k),{modelValue:n(e).month,"onUpdate:modelValue":[t[6]||(t[6]=s=>n(e).month=s),t[7]||(t[7]=()=>{n(e).year=null,n(e).start=null,n(e).end=null})],enableTimePicker:!1,format:"MMMM",maxDate:new Date,monthChangeOnScroll:!1,autoApply:"",monthPicker:"",monthNameFormat:"long"},null,8,["modelValue","maxDate"])]),n(e).error2?(m(),b("div",be,g(n(e).error2),1)):w("",!0),a("button",{onClick:t[8]||(t[8]=s=>A()),class:"btn btn-sm mt-8 text-first bg-slate-200 border-none hover:text-white hover:bg-first font-bold"},"Filter")]),_:1})])])])]),_:1})}}};export{_e as default};
