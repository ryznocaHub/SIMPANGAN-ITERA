import{_ as N}from"./Master.83d66d13.js";import{_ as c}from"./Container.3c236ea6.js";import{C as R,p as F,a as M,B as O,b as K,L as E,c as z,P as $,D as H,d as I,e as J}from"./dashboard.00611658.js";import{u as U,o as m,c as W,w as i,a as n,b as a,d as r,e as g,f as y,t as b,L as X,n as Z,g as v,r as w}from"./app.cbadd5a6.js";import{_ as h}from"./Header1.4d5ae8c0.js";import{d as p}from"./main.ab9d0f21.js";import{h as d}from"./moment.9709ab41.js";const q={class:"flex justify-between items-center h-screen mt-10"},G={class:"w-6/12"},Q={key:0,class:"w-6/12 ml-5"},Y={class:"flex justify-between"},ee=y("Lihat"),te={key:1,class:"w-5/12 text-right"},ae=r("div",{class:"flex justify-end"},[r("div",{class:"text-right text-4xl font-extrabold tracking-widest text-first drop-shadow-xl flex"},"Pengadaan"),r("span",{class:"flex h-5 w-5 relative justify-center items-center"},[r("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-error opacity-75 delay-200"}),r("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-none border-error border-2 border-solid delay-75"}),r("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-none border-error border-2 border-solid"}),r("span",{class:"right-0 relative inline-flex rounded-full h-3 w-3 bg-error"})])],-1),re=r("div",{class:"text-right mr-5 text-4xl font-extrabold mb-5 tracking-widest text-first drop-shadow-xl"},"Barang dan Jasa",-1),le=r("div",{class:"text-lg tracking-wide leading-7"},"adalah kegiatan Pengadaan Barang / Jasa oleh Kementerian / Lembaga / Perangkat Daerah yang dibiayai oleh APBN/APBD yang prosesnya sejak identifikasi kebutuhan, sampai dengan serah terima hasil pekerjaan.",-1),ne=[ae,re,le],se={class:"flex justify-between items-center"},oe=r("div",{class:"w-5/12"},[r("div",{class:"flex"},[r("span",{class:"flex h-5 w-5 relative justify-center items-center"},[r("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-error opacity-75 delay-200"}),r("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-none border-error border-2 border-solid delay-75"}),r("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-none border-error border-2 border-solid"}),r("span",{class:"right-0 relative inline-flex rounded-full h-3 w-3 bg-error"})]),r("div",{class:"text-4xl font-extrabold tracking-widest text-first drop-shadow-xl flex"},"Institut")]),r("div",{class:"ml-5 text-4xl font-extrabold mb-5 tracking-widest text-first drop-shadow-xl"},"Teknologi Sumatera"),r("div",{class:"text-lg tracking-wide leading-7"},"Sebagai salah satu Perguruan Tinggi Negeri di Indonesia, ITERA turut melaksanakan kegiatan pengadaan barang dan jasa guna menunjang tercapainya Tridharma Perguruan Tinggi."),r("div",{class:"text-lg tracking-wide leading-7"},"Setidaknya terdapat \xB150 unit kerja yang melaksanakan kegiatan pengadaan barang dan jasa.")],-1),ie={class:"w-7/12 grid place-items-center ml-10"},de={class:"flex justify-between"},ue=r("div",null,"Filter Berdasarkan Jangkauan Tanggal",-1),fe=r("span",{class:"mx-5 font-bold text-lg"},"-",-1),ce={key:0,class:"text-error text-sm mb-5 mt-2"},me=r("div",null,"Filter Berdasarkan Bulan",-1),ge=r("div",{class:"mt-5"},"Filter Berdasarkan Tahun",-1),be={key:0,class:"text-error text-sm mt-2"},Pe={__name:"Index",props:{procurements:{type:Object},groupedProc:{type:Object},width:{type:Number,default:200},height:{type:Number,default:300}},setup(x){const u=x;R.register(F,M,O,K,E,z,$);function _(l){var t=[];for(let o=2;o<11;o++)l[o]?t.push(l[o].length):t.push(0);return t}function k(l){var t=[];for(const o in l)t.push(l[o].id);return t}function P(l){for(var t="",o=l.toString().split("").reverse().join(""),f=0;f<o.length;f++)f%3==0&&(t+=o.substr(f,3)+".");return"Rp. "+t.split("",t.length-1).reverse().join("")}var D={labels:k(u.procurements.data),datasets:[{data:u.procurements.data,tension:.3,borderColor:"rgb(34,211,238)",pointBackgroundColor:"#ff7674",pointHoverBorderWidth:10,pointBorderColor:"rgb(255, 118, 116, 0.4)",pointBorderWidth:4,borderWidth:2,backgroundColor:"#ffd700",fill:!0}]};const e=U({preview:null,start:null,end:null,month:null,year:null,error:"",error2:"",show:0,cek:D}),C=["RAB Masuk","Revisi RAB","Penunjukan Tim HPS","Pembuatan HPS","Pengecekan HPS","Revisi HPS","Penunjukan Supplier","Proses Kontrak","Pengadaan Selesai"],j={labels:[1,2,3,4,5,6,7,8,9],datasets:[{label:"Total",backgroundColor:["rgb(207,250,254, 0.4)","rgb(255,255,152, 0.3)","rgb(186,230,253, 0.2)","rgb(165,243,252, 0.3)","rgb(103,232,249, 0.3)","rgb(255,255,152, 0.6)","rgb(34,211,238, 0.3)","rgb(56,189,248, 0.4)"],borderColor:["rgb(207,250,254, 0.9)","rgb(255,231,138, 0.6)","rgb(186,230,253, 0.4)","rgb(165,243,252, 0.4)","rgb(103,232,249, 0.4)","rgb(255,231,138, 0.6)","rgb(34,211,238, 0.4)","rgb(56,189,248, 0.4)"],borderWidth:2,borderRadius:5,data:_(u.groupedProc)}]},B={responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{beginAtZero:!0,callback:function(l){if(l%1===0)return l}},title:{text:"Total",display:!0}},x:{ticks:{},title:{text:"Fase Pengadaan",display:!0}}},plugins:{tooltip:{callbacks:{title:function(l){return C[l[0].dataIndex]},label:function(l){return"Total : "+l.formattedValue},afterFooter:function(){return"Klik untuk melihat"}}}},parsing:{xAxisKey:"id"},onClick:(l,t)=>{e.preview=u.groupedProc[t[0].index+2],e.show=1}},S={responsive:!0,maintainAspectRatio:!1,parsing:{xAxisKey:"id",yAxisKey:"total"},scales:{y:{ticks:{callback:function(l){if(l%1e7===0)return l/1e6+" Jt"}},title:{text:"Nilai RAB",display:!0}},x:{ticks:{display:!1}}},plugins:{tooltip:{callbacks:{title:function(l){return l[0].raw.name},label:function(l){return"Rp. "+l.formattedValue}}},filler:{drawTime:"beforeDraw"}},elements:{line:{fill:!0,backgroundColor:"rgb(186,230,253, 0.2)"}},datasets:{line:{fill:!0,backgroundColor:"rgb(186,230,253, 0.2)"}}},T=()=>{if(e.start==null||e.end==null){e.error="Kedua Field jangkauan tanggal harus terisi";return}if(e.start>e.end){e.error="Field Jangkauan Awal harus lebih kecil";return}e.error="",e.error2="";var l=u.procurements.data.filter(function(t){return d(e.start)<d(t.date)&&d(e.end)>d(t.date)});e.cek={labels:k(l),datasets:[{backgroundColor:"#f87979",data:l}]}},V=()=>{if(e.year==null&&e.month==null){e.error2="Salah satu field harus terisi";return}e.error="",e.error2="";var l=u.procurements.data.filter(function(t){if(e.month)return e.month&&d(t.date).isSame(e.month,"month");console.log(e.year),console.log(d(t.date).isSame(e.year,"year"))});e.cek={labels:k(l),datasets:[{backgroundColor:"#f87979",data:l}]}},A=[{text:"Tanggal",value:"date",sortable:!0},{text:"Nama Paket PL",value:"name",sortable:!0},{text:"Unit Kerja",value:"unit",sortable:!0},{text:"Nilai RAB",value:"total",sortable:!0},{text:"aksi",value:"aksi"}];return(l,t)=>{const o=w("Vue3Lottie"),f=w("EasyDataTable");return m(),W(N,null,{default:i(({loading:L})=>[n(o,{animationData:a(H),height:450,width:700},null,8,["animationData"]),r("div",q,[r("div",G,[n(h,{title:"Status Pengadaan","width-size":"100",class:""}),n(c,null,{default:i(()=>[n(a(I),{"chart-options":B,"chart-data":j,width:x.width,height:x.height},null,8,["width","height"])]),_:1})]),a(e).preview?(m(),g("div",Q,[r("div",Y,[n(h,{title:"Daftar Pengadaan","width-size":"100"}),r("button",{onClick:t[0]||(t[0]=()=>a(e).preview=null),class:"btn btn-sm text-first bg-slate-200 border-none hover:text-white hover:bg-first font-bold"},"X")]),n(c,null,{default:i(()=>[n(f,{headers:A,items:a(e).preview,"table-class-name":"customize-table",sortBy:"status",sortType:"asc","rows-per-page":5,maxPaginationNumber:10,"buttons-pagination":""},{"item-date":i(({date:s})=>[y(b(a(d)(s).format("DD-MM-yy")),1)]),"item-total":i(({total:s})=>[y(b(P(s)),1)]),"item-aksi":i(({id:s})=>[n(a(X),{onClick:he=>L(),href:l.route("admin.procurement.show",s),class:"btn btn-xs text-first bg-slate-200 border-none hover:text-white hover:bg-first font-bold"},{default:i(()=>[ee]),_:2},1032,["onClick","href"])]),_:2},1032,["items"])]),_:2},1024)])):(m(),g("div",te,ne))]),r("div",se,[oe,r("div",ie,[n(h,{title:"Sebaran Nilai RAB","width-size":"100",class:"place-self-start"}),n(c,{class:"mt-0 w-full"},{default:i(()=>[n(a(J),{"chart-options":S,"chart-data":a(e).cek,height:200},null,8,["chart-data"])]),_:1}),n(h,{title:"Filter Data","width-size":"100",class:"place-self-start mt-8"}),r("div",de,[n(c,{class:"w-6/12 flex flex-col justify-between"},{default:i(()=>[r("div",null,[ue,r("div",{class:Z(["flex justify-center mb-5 mt-5",{"mb-5":!a(e).error}])},[n(a(p),{modelValue:a(e).start,"onUpdate:modelValue":[t[1]||(t[1]=s=>a(e).start=s),t[2]||(t[2]=()=>{a(e).year=null,a(e).month=null})],enableTimePicker:!1,format:"dd-MM-yy",maxDate:new Date,monthChangeOnScroll:!1,autoApply:""},null,8,["modelValue","maxDate"]),fe,n(a(p),{modelValue:a(e).end,"onUpdate:modelValue":[t[3]||(t[3]=s=>a(e).end=s),t[4]||(t[4]=()=>{a(e).year=null,a(e).month=null})],enableTimePicker:!1,format:"dd-MM-yy",maxDate:new Date,monthChangeOnScroll:!1,autoApply:""},null,8,["modelValue","maxDate"])],2),a(e).error?(m(),g("div",ce,b(a(e).error),1)):v("",!0)]),r("button",{onClick:t[5]||(t[5]=s=>T()),class:"btn btn-sm mt-8 text-first bg-slate-200 border-none hover:text-white hover:bg-first font-bold"},"Filter")]),_:1}),n(c,{class:"w-4/12"},{default:i(()=>[me,n(a(p),{modelValue:a(e).month,"onUpdate:modelValue":[t[6]||(t[6]=s=>a(e).month=s),t[7]||(t[7]=()=>{a(e).year=null,a(e).start=null,a(e).end=null})],enableTimePicker:!1,format:"MMMM",maxDate:new Date,monthChangeOnScroll:!1,autoApply:"",monthPicker:"",monthNameFormat:"long"},null,8,["modelValue","maxDate"]),ge,n(a(p),{modelValue:a(e).year,"onUpdate:modelValue":[t[8]||(t[8]=s=>a(e).year=s),t[9]||(t[9]=()=>{a(e).month=null,a(e).start=null,a(e).end=null})],enableTimePicker:!1,format:"yyyy",maxDate:new Date,monthChangeOnScroll:!1,autoApply:"",yearPicker:""},null,8,["modelValue","maxDate"]),a(e).error2?(m(),g("div",be,b(a(e).error2),1)):v("",!0),r("button",{onClick:t[10]||(t[10]=s=>V()),class:"btn btn-sm mt-8 text-first bg-slate-200 border-none hover:text-white hover:bg-first font-bold"},"Filter")]),_:1})])])])]),_:1})}}};export{Pe as default};
